---
// CustomSelect.astro
const options = [
    "Boda",
    "Fiesta de 15",
    "Ceremonia Civíl",
    "Evento Empresarial",
    "Bautismo",
    "Cumpleaños Infantil",
    "Otro"
];
---
<div>
    <div class="relative">
      <button type="button" id="custom-select-button" class="relative w-full cursor-default rounded-md py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-luxus sm:text-sm sm:leading-6 bg-white bg-opacity-40 placeholder:text-white" aria-haspopup="listbox" aria-expanded="false" aria-labelledby="listbox-label">
        <span class="flex items-center">
          <span id="selected-option" class="ml-1 text-white block truncate">Tipo de evento</span>
        </span>
        <span class="pointer-events-none absolute inset-y-0 right-0 ml-3 flex items-center pr-2">
          <i class="fas fa-chevron-down text-white"></i>
        </span>
      </button>
      <ul id="custom-select-menu" class="hidden absolute z-10 mt-1 max-h-56 w-full overflow-auto rounded-md bg-white opacity-70 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm" tabindex="-1" role="listbox" aria-labelledby="listbox-label">
        {options.map((option) => (
            <li class="relative cursor-pointer select-none py-2 pl-3 pr-9 text-gray-900 hover:text-luxus hover:font-bold" role="option" data-value={option}>
                <div class="flex items-center">
                    <span class="ml-3 block truncate font-normal">{option}</span>
                </div>
            </li>
        ))}
      </ul>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const selectButton = document.getElementById('custom-select-button');
      const selectMenu = document.getElementById('custom-select-menu');
      const selectOptions = selectMenu.querySelectorAll('[role="option"]');
      const selectedOption = document.getElementById('selected-option');
  
      if (selectButton && selectMenu && selectedOption) {
        selectButton.addEventListener('click', function () {
          const expanded = selectButton.getAttribute('aria-expanded') === 'true';
          selectButton.setAttribute('aria-expanded', (!expanded).toString());
          selectMenu.classList.toggle('hidden');
        });
  
        selectOptions.forEach(option => {
          option.addEventListener('click', function () {
            selectedOption.textContent = this.dataset.value;
            selectButton.setAttribute('aria-expanded', 'false');
            selectMenu.classList.add('hidden');
          });
        });
  
        document.addEventListener('click', function (e) {
          const target = e.target as Node;
          if (!selectButton.contains(target) && !selectMenu.contains(target)) {
            selectButton.setAttribute('aria-expanded', 'false');
            selectMenu.classList.add('hidden');
          }
        });
      }
    });
  </script>
  